(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(3647)}])},3546:function(e,n,r){"use strict";function s(){window.confirm("\xcates-vous s\xfbr de vouloir vous d\xe9connecter ?")&&logout()}r.d(n,{Z:function(){return s}})},6898:function(e,n,r){"use strict";r.d(n,{Z:function(){return c}});var s=r(5893),i=r(1664),l=r.n(i),a=r(7294),t=r(7031),o=r(3546);function c(){let{user:e,logout:n}=(0,a.useContext)(t.Z);return(0,s.jsxs)("nav",{className:"navbar",children:[(0,s.jsx)("div",{className:"logo-navbar",children:(0,s.jsx)("h2",{children:"TravelEasy"})}),(0,s.jsx)("div",{className:"liste-navbar",children:(0,s.jsxs)("ul",{children:[(0,s.jsx)("li",{className:"li-navbar",children:(0,s.jsx)(l(),{href:"/",children:"Accueil"})}),(0,s.jsx)("li",{className:"li-navbar",children:(0,s.jsx)(l(),{href:"/boutique",children:"Boutique"})}),(0,s.jsx)("li",{className:"li-navbar",children:(0,s.jsx)(l(),{href:"/panier",children:"Panier"})}),e?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:"li-navbar",children:(0,s.jsx)(l(),{href:"/compte",children:"Mon Compte"})}),(0,s.jsx)("li",{className:"li-navbar",children:(0,s.jsx)("a",{onClick:o.Z,style:{cursor:"pointer"},children:"D\xe9connexion"})})]}):(0,s.jsx)("li",{className:"li-navbar",children:(0,s.jsx)(l(),{href:"/login",children:"Connexion"})})]})})]})}},3647:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return h}});var s=r(5893),i=r(7294),l=r(1664),a=r.n(l),t=r(1163),o=r(7031),c=r(1955),u=()=>{let[e,n]=(0,i.useState)(""),[r,l]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),{login:h}=(0,i.useContext)(o.Z),x=(0,t.useRouter)(),j=async n=>{n.preventDefault(),d("");try{let n=await fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:r})});if(n.ok){let e=await n.json();h(e),c.Z.remove("userId"),c.Z.set("userId",e._id,{expires:7,path:"/"}),x.push("/compte")}else{let e=await n.json();d(e.message||"Erreur de connexion")}}catch(e){console.error("Erreur lors de la connexion",e),d("Erreur lors de la connexion")}};return(0,s.jsxs)("div",{className:"login-container",children:[(0,s.jsx)("h2",{children:"Connexion"}),(0,s.jsxs)("form",{onSubmit:j,children:[(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"email",children:"Email:"}),(0,s.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"form-group",children:[(0,s.jsx)("label",{htmlFor:"password",children:"Mot de passe:"}),(0,s.jsx)("input",{type:"password",id:"password",value:r,onChange:e=>l(e.target.value),required:!0})]}),u&&(0,s.jsx)("p",{style:{color:"red"},children:u}),(0,s.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Connexion"})]}),(0,s.jsxs)("p",{className:"register-link",children:["Si vous n'avez pas de compte, ",(0,s.jsx)(a(),{href:"/register",children:"cr\xe9ez-en un"}),"."]})]})},d=r(6898);function h(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(d.Z,{})}),(0,s.jsx)("div",{children:(0,s.jsx)(u,{})})]})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);