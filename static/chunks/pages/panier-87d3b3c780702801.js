(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[578],{9699:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/panier",function(){return s(9492)}])},3546:function(e,r,s){"use strict";function t(){window.confirm("\xcates-vous s\xfbr de vouloir vous d\xe9connecter ?")&&logout()}s.d(r,{Z:function(){return t}})},6898:function(e,r,s){"use strict";s.d(r,{Z:function(){return o}});var t=s(5893),n=s(1664),i=s.n(n),a=s(7294),l=s(7031),c=s(3546);function o(){let{user:e,logout:r}=(0,a.useContext)(l.Z);return(0,t.jsxs)("nav",{className:"navbar",children:[(0,t.jsx)("div",{className:"logo-navbar",children:(0,t.jsx)("h2",{children:"TravelEasy"})}),(0,t.jsx)("div",{className:"liste-navbar",children:(0,t.jsxs)("ul",{children:[(0,t.jsx)("li",{className:"li-navbar",children:(0,t.jsx)(i(),{href:"/",children:"Accueil"})}),(0,t.jsx)("li",{className:"li-navbar",children:(0,t.jsx)(i(),{href:"/boutique",children:"Boutique"})}),(0,t.jsx)("li",{className:"li-navbar",children:(0,t.jsx)(i(),{href:"/panier",children:"Panier"})}),e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:"li-navbar",children:(0,t.jsx)(i(),{href:"/compte",children:"Mon Compte"})}),(0,t.jsx)("li",{className:"li-navbar",children:(0,t.jsx)("a",{onClick:c.Z,style:{cursor:"pointer"},children:"D\xe9connexion"})})]}):(0,t.jsx)("li",{className:"li-navbar",children:(0,t.jsx)(i(),{href:"/login",children:"Connexion"})})]})})]})}},8565:function(e,r,s){"use strict";var t=s(5893),n=s(5026),i=s(7294);r.Z=()=>{let{cartProducts:e,clearCart:r}=(0,i.useContext)(n.A9),[s,a]=(0,i.useState)(""),[l,c]=(0,i.useState)(""),[o,d]=(0,i.useState)(""),[u,h]=(0,i.useState)(""),[m,x]=(0,i.useState)(""),[j,p]=(0,i.useState)(""),v=async r=>{if(r.preventDefault(),!s||!l||!o||!u||!m||!j||0===e.length){console.error("Missing required fields");return}let t=e.map(e=>e._id);try{let e=await fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstname:s,name:l,ville:o,codePost:u,adresse:m,pays:j,products:t})});if(e.ok){let r=await e.json();window.location.href=r.url,localStorage.clear()}else{let r=await e.json();console.error("Error creating order:",r)}}catch(e){console.error("Error creating order:",e)}};return(0,t.jsxs)("div",{className:"chekout-container",children:[(0,t.jsx)("h2",{children:"Vos Information"}),(0,t.jsxs)("form",{onSubmit:v,children:[(0,t.jsxs)("div",{className:"chekout-form-group",children:[(0,t.jsx)("label",{htmlFor:"firstname",children:"Pr\xe9nom:"}),(0,t.jsx)("input",{type:"text",id:"firstname",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"chekout-form-group",children:[(0,t.jsx)("label",{htmlFor:"name",children:"Nom:"}),(0,t.jsx)("input",{type:"text",id:"name",value:l,onChange:e=>c(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"chekout-form-group",children:[(0,t.jsx)("label",{htmlFor:"ville",children:"Ville:"}),(0,t.jsx)("input",{type:"text",id:"ville",value:o,onChange:e=>d(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"chekout-form-group",children:[(0,t.jsx)("label",{htmlFor:"codePost",children:"Code Postal:"}),(0,t.jsx)("input",{type:"text",id:"codePost",value:u,onChange:e=>h(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"chekout-form-group",children:[(0,t.jsx)("label",{htmlFor:"adresse",children:"Adresse Postale:"}),(0,t.jsx)("input",{type:"text",id:"adresse",value:m,onChange:e=>x(e.target.value),required:!0})]}),(0,t.jsxs)("div",{className:"chekout-form-group",children:[(0,t.jsx)("label",{htmlFor:"pays",children:"Pays:"}),(0,t.jsx)("input",{type:"text",id:"pays",value:j,onChange:e=>p(e.target.value),required:!0})]}),(0,t.jsx)("button",{type:"submit",className:"register-btn btn-primary",children:"Continuer vers payement"})]})]})}},9492:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return o}});var t=s(5893),n=s(6898),i=s(8565),a=s(5026),l=s(1163),c=()=>{let{cartProducts:e,removeFromCart:r,increaseQuantity:s,decreaseQuantity:n}=(0,a.jD)();(0,l.useRouter)();let i=e=>{window.confirm("\xcates-vous s\xfbr de vouloir Supprimer le produit ?")&&r(e)},c=e=>{s(e)},o=e=>{n(e)};return(0,t.jsxs)("div",{className:"cart-container",children:[(0,t.jsx)("h1",{className:"title-page",children:"Votre Panier"}),(0,t.jsx)("div",{children:0===e.length?(0,t.jsx)("p",{className:"title-page",children:"Votre panier est vide."}):(0,t.jsxs)(t.Fragment,{children:[e.map((e,r)=>(0,t.jsxs)("div",{className:"cart-item",children:[(0,t.jsx)("div",{className:"image-panier",children:e.images&&e.images.length>0&&(0,t.jsx)("img",{src:e.images[0],alt:e.title})}),(0,t.jsxs)("div",{className:"product-info",children:[(0,t.jsx)("h2",{className:"product-title",children:e.title}),(0,t.jsxs)("p",{className:"product-price",children:["Prix: ",e.price,"€"]})]}),(0,t.jsxs)("div",{className:"quantity-controls",children:[(0,t.jsx)("p",{className:"product-title-quant",children:"Quantit\xe9:"}),(0,t.jsx)("button",{className:"quantity-button",onClick:()=>o(e._id),children:"-"}),(0,t.jsxs)("p",{children:[" ",e.quantity]}),(0,t.jsx)("button",{className:"quantity-button",onClick:()=>c(e._id),children:"+"})]}),(0,t.jsx)("button",{className:"remove-button",onClick:()=>i(e._id),children:"Supprimer"})]},r)),(0,t.jsx)("div",{className:"total-container",children:(0,t.jsxs)("h2",{children:["Total: ",e.reduce((e,r)=>e+r.price*r.quantity,0),"€"]})})]})})]})};function o(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{children:(0,t.jsx)(n.Z,{})}),(0,t.jsxs)("div",{className:"Panier-assemble",children:[(0,t.jsx)(c,{}),(0,t.jsx)(i.Z,{})]})]})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=9699)}),_N_E=e.O()}]);