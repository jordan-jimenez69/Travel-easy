(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{1118:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(3414)}])},5026:function(e,t,n){"use strict";n.d(t,{A9:function(){return i},Zl:function(){return u},jD:function(){return c}});var r=n(5893),o=n(7294);let i=(0,o.createContext)(),u=e=>{let{children:t}=e,n=window.localStorage,[u,c]=(0,o.useState)([]);return(0,o.useEffect)(()=>{(null==u?void 0:u.length)>0&&(null==n||n.setItem("cart",JSON.stringify(u)))},[u]),(0,o.useEffect)(()=>{n&&n.getItem("cart")&&c(JSON.parse(n.getItem("cart")))},[]),(0,r.jsx)(i.Provider,{value:{cartProducts:u,addToCart:e=>{let t=u.findIndex(t=>t._id===e._id);if(-1!==t){let e=[...u];e[t].quantity+=1,c(e)}else c(t=>[...t,{...e,quantity:1}])},removeFromCart:e=>{c(t=>t.filter(t=>t._id!==e)),1===u.length&&(null==n||n.removeItem("cart"))},clearCart:()=>{c([])},setCartProducts:c,increaseQuantity:e=>{c(t=>t.map(t=>t._id===e?{...t,quantity:t.quantity+1}:t))},decreaseQuantity:e=>{c(t=>t.map(t=>t._id===e&&t.quantity>1?{...t,quantity:t.quantity-1}:t))}},children:t})},c=()=>(0,o.useContext)(i)},7031:function(e,t,n){"use strict";n.d(t,{d:function(){return a}});var r=n(5893),o=n(7294),i=n(1163),u=n(1955);let c=(0,o.createContext)(),a=e=>{let{children:t}=e,[n,a]=(0,o.useState)(null),s=(0,i.useRouter)();(0,o.useEffect)(()=>{(async()=>{let e=u.Z.get("userId");if(console.log("userId from cookie:",e),e)try{let e=await fetch("/api/users",{headers:{"Content-Type":"application/json"}});if(console.log("Response status:",e.status),e.ok){let t=await e.json();console.log("User data fetched:",t),a(t)}else console.log("Failed to fetch user data:",await e.text()),a(null)}catch(e){console.error("Erreur lors de la r\xe9cup\xe9ration des informations utilisateur :",e),a(null)}else a(null)})()},[]);let l=async()=>{await fetch("/api/logout",{method:"POST"}),u.Z.remove("userId"),a(null),s.push("/login")};return(0,r.jsx)(c.Provider,{value:{user:n,login:e=>{a(e),console.log("Setting userId cookie:",e._id),u.Z.set("userId",e._id,{expires:7,path:"/"})},logout:l},children:t})};t.Z=c},3414:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893);n(9311),n(1685),n(2552),n(1607),n(6599),n(5645),n(4067),n(555),n(2324),n(1530);var o=n(7031),i=n(5026);function u(e){let{Component:t,pageProps:n}=e;return(0,r.jsx)(o.d,{children:(0,r.jsx)(i.Zl,{children:(0,r.jsx)(t,{...n})})})}},6599:function(){},5645:function(){},2324:function(){},4067:function(){},555:function(){},9311:function(){},2552:function(){},1607:function(){},1685:function(){},1530:function(){},1163:function(e,t,n){e.exports=n(9090)},1955:function(e,t,n){"use strict";/*! js-cookie v3.0.5 | MIT */function r(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)e[r]=n[r]}return e}n.d(t,{Z:function(){return o}});var o=function e(t,n){function o(e,o,i){if("undefined"!=typeof document){"number"==typeof(i=r({},n,i)).expires&&(i.expires=new Date(Date.now()+864e5*i.expires)),i.expires&&(i.expires=i.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var u="";for(var c in i)i[c]&&(u+="; "+c,!0!==i[c]&&(u+="="+i[c].split(";")[0]));return document.cookie=e+"="+t.write(o,e)+u}}return Object.create({set:o,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var n=document.cookie?document.cookie.split("; "):[],r={},o=0;o<n.length;o++){var i=n[o].split("="),u=i.slice(1).join("=");try{var c=decodeURIComponent(i[0]);if(r[c]=t.read(u,c),e===c)break}catch(e){}}return e?r[e]:r}},remove:function(e,t){o(e,"",r({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,r({},this.attributes,t))},withConverter:function(t){return e(r({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(n)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(1118),t(9090)}),_N_E=e.O()}]);